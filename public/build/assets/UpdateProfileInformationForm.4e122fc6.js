import{W as F,u as C,r as l,a,F as R,j as e,d as _,O as j}from"./app.293a78a2.js";import{c as A}from"./index.0579b088.js";import{A as D}from"./ActionMessage.7d06ce1d.js";import{F as T}from"./FormSection.b1cb34bc.js";import{I as i}from"./InputError.68b75152.js";import{I as m}from"./InputLabel.8542de9e.js";import{P as L}from"./PrimaryButton.9495eb81.js";import{T as N}from"./TextInput.acc7a464.js";import{S as P}from"./SecondaryButton.6c338189.js";import{u as U}from"./useTypedPage.35d8ff85.js";import"./transition.b3d540a8.js";import"./SectionTitle.713e09e5.js";function J({user:r}){const o=F({_method:"PUT",name:r.name,email:r.email,photo:null}),s=C(),[c,u]=l.exports.useState(null),n=l.exports.useRef(null),d=U(),[S,y]=l.exports.useState(!1);function b(){o.post(s("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>p()})}function k(){var t;(t=n.current)==null||t.click()}function x(){var h,v;const t=(v=(h=n.current)==null?void 0:h.files)==null?void 0:v[0];if(!t)return;o.setData("photo",t);const f=new FileReader;f.onload=I=>{var g;u((g=I.target)==null?void 0:g.result)},f.readAsDataURL(t)}function w(){j.delete(s("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{u(null),p()}})}function p(){var t;(t=n.current)!=null&&t.value&&(n.current.value="",o.setData("photo",null))}return a(T,{onSubmit:b,title:"Profile Information",description:"Update your account's profile information and email address.",renderActions:()=>a(R,{children:[e(D,{on:o.recentlySuccessful,className:"mr-3",children:"Saved."}),e(L,{className:A({"opacity-25":o.processing}),disabled:o.processing,children:"Save"})]}),children:[d.props.jetstream.managesProfilePhotos?a("div",{className:"col-span-6 sm:col-span-4",children:[e("input",{type:"file",className:"hidden",ref:n,onChange:x}),e(m,{htmlFor:"photo",value:"Photo"}),c?e("div",{className:"mt-2",children:e("span",{className:"block rounded-full w-20 h-20",style:{backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:`url('${c}')`}})}):e("div",{className:"mt-2",children:e("img",{src:r.profile_photo_url,alt:r.name,className:"rounded-full h-20 w-20 object-cover"})}),e(P,{className:"mt-2 mr-2",type:"button",onClick:k,children:"Select A New Photo"}),r.profile_photo_path?e(P,{type:"button",className:"mt-2",onClick:w,children:"Remove Photo"}):null,e(i,{message:o.errors.photo,className:"mt-2"})]}):null,a("div",{className:"col-span-6 sm:col-span-4",children:[e(m,{htmlFor:"name",value:"Name"}),e(N,{id:"name",type:"text",className:"mt-1 block w-full",value:o.data.name,onChange:t=>o.setData("name",t.currentTarget.value),autoComplete:"name"}),e(i,{message:o.errors.name,className:"mt-2"})]}),a("div",{className:"col-span-6 sm:col-span-4",children:[e(m,{htmlFor:"email",value:"Email"}),e(N,{id:"email",type:"email",className:"mt-1 block w-full",value:o.data.email,onChange:t=>o.setData("email",t.currentTarget.value)}),e(i,{message:o.errors.email,className:"mt-2"}),d.props.jetstream.hasEmailVerification&&r.email_verified_at===null?a("div",{children:[a("p",{className:"text-sm mt-2",children:["Your email address is unverified.",e(_,{href:s("verification.send"),method:"post",as:"button",className:"underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:t=>{t.preventDefault(),y(!0)},children:"Click here to re-send the verification email."})]}),S&&e("div",{className:"mt-2 font-medium text-sm text-green-600",children:"A new verification link has been sent to your email address."})]}):null]})]})}export{J as default};
